{"ast":null,"code":"import React,{useState}from'react';import{TEInput,TERipple}from'tw-elements-react';import{useMutation}from'react-query';import ApiClient from'../api/ApiClient';import Message from'../components/Message';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UsernamePasswordForm=props=>{const[errorMessage,setErrorMessage]=useState('');const[successMessage,setSuccessMessage]=useState('');const mutation=useMutation(ApiClient.sendUserNamePasswordForm,{onSuccess:data=>{if(props.isLogin){window.location.href='/main';}else{setSuccessMessage(data);setTimeout(()=>{window.location.href='/authenticate';},1000);}},onError:err=>{setErrorMessage(err.message);}});const[form,setForm]=useState({username:'',password:''});const handleChange=e=>{setForm({...form,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();if(!form.username||!form.password)return;//reset messages for every button click\nsetErrorMessage('');setSuccessMessage('');mutation.mutate({username:form.username,password:form.password,isLogin:props.isLogin});};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"lg:text-xl text-xl font-poppins text-black leading-10 md:text-center py-10 font-semibold drop-shadow\",children:props.isLogin?\"Log into your account\":\"Create an account\"}),/*#__PURE__*/_jsx(TEInput,{type:\"text\",name:\"username\",label:\"Username\",size:\"lg\",className:\"mb-6\",onChange:handleChange}),/*#__PURE__*/_jsx(TEInput,{type:\"password\",name:\"password\",label:\"Password\",className:\"mb-6\",size:\"lg\",onChange:handleChange}),/*#__PURE__*/_jsx(TERipple,{rippleColor:\"light\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleSubmit,className:\"inline-block rounded bg-danger-300 px-7 pb-2.5 pt-3 text-sm font-medium uppercase leading-normal text-white transition duration-150 ease-in-out hover:bg-danger-400\",children:props.isLogin?\"Login\":\"Sign Up\"})}),/*#__PURE__*/_jsxs(\"h4\",{className:\"lg:text-xl text-lg font-poppins text-black leading-10 md:text-center py-10 font-semibold drop-shadow\",children:[props.isLogin?\"Don't have an account yet?\":\"Already have an account?\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"a\",{href:props.isLogin?\"/register\":\"/authenticate\",className:\"text-danger transition duration-150 ease-in-out hover:text-danger-600 focus:text-danger-600 active:text-danger-700\",children:props.isLogin?\"Register\":\"Log in\"})]}),errorMessage!==''&&/*#__PURE__*/_jsx(Message,{msg:errorMessage,isSuccess:false})||successMessage!==''&&/*#__PURE__*/_jsx(Message,{msg:successMessage,isSuccess:true})]});};export default UsernamePasswordForm;","map":{"version":3,"names":["React","useState","TEInput","TERipple","useMutation","ApiClient","Message","jsx","_jsx","jsxs","_jsxs","UsernamePasswordForm","props","errorMessage","setErrorMessage","successMessage","setSuccessMessage","mutation","sendUserNamePasswordForm","onSuccess","data","isLogin","window","location","href","setTimeout","onError","err","message","form","setForm","username","password","handleChange","e","target","name","value","handleSubmit","preventDefault","mutate","className","children","type","label","size","onChange","rippleColor","onClick","msg","isSuccess"],"sources":["/Users/tudorandrei/repos/ToDoListApp-abatrineanu/Client/src/pages/UsernamePasswordForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { TEInput, TERipple } from 'tw-elements-react';\r\nimport { useMutation } from 'react-query';\r\nimport ApiClient from '../api/ApiClient';\r\nimport Message from '../components/Message';\r\n\r\nconst UsernamePasswordForm = (props) => {\r\n\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n\r\n  const mutation = useMutation(ApiClient.sendUserNamePasswordForm,\r\n    {\r\n    onSuccess: (data) => {\r\n      if (props.isLogin) {\r\n        window.location.href = '/main';\r\n      }\r\n      else {\r\n        setSuccessMessage(data);\r\n        setTimeout(() => {\r\n          window.location.href = '/authenticate';\r\n        }, 1000);\r\n      }\r\n    },\r\n    onError: (err) => {\r\n      setErrorMessage(err.message);\r\n    },\r\n  });\r\n\r\n  const [form, setForm] = useState({\r\n    username: '',\r\n    password: '',\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    setForm({\r\n      ...form,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if(!form.username || !form.password) return;\r\n\r\n    //reset messages for every button click\r\n    setErrorMessage('');\r\n    setSuccessMessage('');\r\n\r\n    mutation.mutate({username: form.username, password: form.password, isLogin: props.isLogin});\r\n  };\r\n  \r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center\">\r\n      <h4 className=\"lg:text-xl text-xl font-poppins text-black leading-10 md:text-center py-10 font-semibold drop-shadow\">\r\n          {props.isLogin ? \"Log into your account\" : \"Create an account\"}\r\n      </h4>\r\n      <TEInput\r\n        type=\"text\"\r\n        name=\"username\"\r\n        label=\"Username\"\r\n        size=\"lg\"\r\n        className=\"mb-6\"\r\n        onChange={handleChange}\r\n      >\r\n      </TEInput>      \r\n      <TEInput\r\n        type=\"password\"\r\n        name=\"password\"\r\n        label=\"Password\"\r\n        className=\"mb-6\"\r\n        size=\"lg\"\r\n        onChange={handleChange}\r\n      >\r\n      </TEInput>\r\n      <TERipple rippleColor=\"light\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleSubmit}\r\n            className=\"inline-block rounded bg-danger-300 px-7 pb-2.5 pt-3 text-sm font-medium uppercase leading-normal text-white transition duration-150 ease-in-out hover:bg-danger-400\"\r\n          >\r\n            {props.isLogin ? \"Login\" : \"Sign Up\"}\r\n          </button>\r\n      </TERipple>\r\n      <h4 className=\"lg:text-xl text-lg font-poppins text-black leading-10 md:text-center py-10 font-semibold drop-shadow\">\r\n          {props.isLogin ? \"Don't have an account yet?\" : \"Already have an account?\"}\r\n          <br/>\r\n          <a \r\n            href={props.isLogin ? \"/register\" : \"/authenticate\"}\r\n            className=\"text-danger transition duration-150 ease-in-out hover:text-danger-600 focus:text-danger-600 active:text-danger-700\"\r\n          >\r\n            {props.isLogin ? \"Register\" : \"Log in\"}\r\n          </a>\r\n      </h4>\r\n      { (errorMessage !== '' && <Message msg={errorMessage} isSuccess={false}/> ) ||\r\n        (successMessage !== '' && <Message msg={successMessage} isSuccess={true}/> )\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UsernamePasswordForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}